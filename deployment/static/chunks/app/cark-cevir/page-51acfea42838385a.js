(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1288],{6339:function(e,t,r){Promise.resolve().then(r.bind(r,4128))},1524:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(7461).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},9108:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(7461).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},6490:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(7461).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},7759:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(7461).Z)("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]])},4128:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return C}});var a=r(3827),l=r(4090),i=r(5947),s=r(7907),n=r(5494);let c="wheelSpinData",o=[{id:1,value:5,color:"#E57373",probability:25,label:"5"},{id:2,value:10,color:"#F06292",probability:20,label:"10"},{id:3,value:20,color:"#BA68C8",probability:15,label:"20"},{id:4,value:40,color:"#9575CD",probability:12,label:"40"},{id:5,value:50,color:"#7986CB",probability:10,label:"50"},{id:6,value:70,color:"#64B5F6",probability:8,label:"70"},{id:7,value:85,color:"#4FC3F7",probability:5,label:"85"},{id:8,value:100,color:"#4DD0E1",probability:3,label:"100"},{id:9,value:200,color:"#4DB6AC",probability:2,label:"200"}],d=e=>{try{let t=localStorage.getItem(c);return(t?JSON.parse(t):{})[e]||{lastSpinTime:0,spinHistory:[],paidSpins:0}}catch(e){return console.error("Error getting user spin data:",e),{lastSpinTime:0,spinHistory:[],paidSpins:0}}},u=(e,t)=>{try{let r=localStorage.getItem(c),a=r?JSON.parse(r):{};return a[e]=t,localStorage.setItem(c,JSON.stringify(a)),!0}catch(e){return console.error("Error saving user spin data:",e),!1}},m=e=>{let t=d(e);return t.paidSpins>0||(Date.now()-t.lastSpinTime)/36e5>=24},h=e=>{let t=d(e),r=Date.now();return Math.max(0,t.lastSpinTime+864e5-r)},x=e=>{if(e<=0)return"Now";let t=Math.floor(e/1e3),r=Math.floor(t/60);return"".concat(Math.floor(r/60).toString().padStart(2,"0"),":").concat((r%60).toString().padStart(2,"0"),":").concat((t%60).toString().padStart(2,"0"))},b=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=d(e);if(t){if(r.paidSpins<=0)return null}else if((Date.now()-r.lastSpinTime)/36e5<24)return null;let a=p();if(!a)return null;let l={id:Math.random().toString(36).substring(2,15),userId:e,segmentId:a.id,reward:a.value,timestamp:Date.now()};return t?r.paidSpins=Math.max(0,r.paidSpins-1):r.lastSpinTime=l.timestamp,r.spinHistory.unshift(l),r.spinHistory.length>20&&(r.spinHistory=r.spinHistory.slice(0,20)),u(e,r),l},p=()=>{let e=Math.random()*o.reduce((e,t)=>e+t.probability,0),t=0;for(let r of o)if(e<=(t+=r.probability))return r;return o[0]},f=(e,t)=>({id:Math.random().toString(36).substring(2,15),amount:t,description:"\xc7ark \xc7evir \xd6d\xfcl\xfc: ".concat(t," JackCoin"),type:"bonus",timestamp:Date.now(),userId:e});var y=r(1524);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let g=(0,r(7461).Z)("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);var j=r(6490),k=r(3484),v=r(7759),N=e=>{let{onSpin:t}=e,r=(0,i.useAuth)(),[s,n]=(0,l.useState)(!1),[c,u]=(0,l.useState)(0),[p,N]=(0,l.useState)(null),[w,S]=(0,l.useState)(!1),[C,J]=(0,l.useState)(""),[M,z]=(0,l.useState)(!1),[Z,F]=(0,l.useState)(0),[D,I]=(0,l.useState)(null),E=(0,l.useRef)(null),H=(0,l.useRef)(null),B=(0,l.useRef)(null),T=(0,l.useRef)(null);(0,l.useEffect)(()=>{if(!r||!r.user)return;let e=m(r.user.id);return S(e),e||(A(),T.current=setInterval(A,1e3)),()=>{T.current&&clearInterval(T.current),B.current&&clearTimeout(B.current)}},[r]);let A=()=>{if(!r||!r.user)return;let e=h(r.user.id);J(x(e)),e<=0&&(S(!0),T.current&&clearInterval(T.current))},P=async()=>{if(r&&r.user&&!s&&w)try{n(!0),I(null),z(!1);let e=b(r.user.id);if(!e){I("\xc7ark \xe7evirme işlemi şu anda ger\xe7ekleştirilemiyor. L\xfctfen daha sonra tekrar deneyin."),n(!1);return}let a=o.findIndex(t=>t.id===e.segmentId);N(a),F(e.reward);let l=360/o.length,i=360-(l*a+l/2);u(1800+i+5*Math.random()),setTimeout(async()=>{z(!0);try{if(r&&r.user){let a=f(r.user.id,e.reward);await r.updateJackPoints(e.reward,a.description,"bonus"),t&&t(e.reward)}}catch(e){console.error("Error updating JackPoints:",e),I("JackPoint \xf6d\xfcl\xfcn\xfcz eklenirken bir hata oluştu.")}B.current=setTimeout(()=>{z(!1),n(!1),S(!1),A(),T.current=setInterval(A,1e3)},3e3)},5e3)}catch(e){console.error("Error during spin:",e),I("\xc7ark \xe7evirme sırasında bir hata oluştu."),n(!1)}},O=360/o.length;return(0,a.jsxs)("div",{className:"relative flex flex-col items-center justify-center p-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-center mb-4",children:"\xc7ark \xc7evir"}),(0,a.jsx)("p",{className:"text-center text-gray-300 mb-6",children:"Her 24 saatte bir \xe7arkı \xe7evirerek JackCoin kazanabilirsiniz!"}),D&&(0,a.jsxs)("div",{className:"bg-red-900/30 text-red-300 border border-red-800 p-3 rounded-md mb-4 flex items-center",children:[(0,a.jsx)(y.Z,{className:"w-5 h-5 mr-2"}),(0,a.jsx)("span",{children:D})]}),(0,a.jsxs)("div",{className:"relative mb-4",style:{width:"300px",height:"300px"},children:[(0,a.jsx)("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10",children:(0,a.jsx)("div",{className:"w-0 h-0 border-l-[15px] border-r-[15px] border-t-[20px] border-l-transparent border-r-transparent border-t-[#FF6B00]"})}),(0,a.jsx)("div",{ref:E,className:"w-full h-full rounded-full overflow-hidden relative transition-transform duration-5000 ease-out",style:{transform:"rotate(".concat(c,"deg)"),transitionDuration:s?"5s":"0s",boxShadow:"0 0 20px rgba(0, 0, 0, 0.3)"},children:o.map((e,t)=>{let r=t*O,l=(t+1)*O;return(0,a.jsx)("div",{className:"absolute top-0 left-0 w-full h-full flex items-center justify-center font-bold",style:{clipPath:"polygon(50% 50%, ".concat(50+50*Math.cos((r-90)*Math.PI/180),"% ").concat(50+50*Math.sin((r-90)*Math.PI/180),"%, ").concat(50+50*Math.cos((l-90)*Math.PI/180),"% ").concat(50+50*Math.sin((l-90)*Math.PI/180),"%)"),backgroundColor:e.color},children:(0,a.jsx)("div",{className:"absolute text-white font-bold text-lg",style:{transform:"rotate(".concat(O/2+O*t-90,"deg) translateX(100px)")},children:e.label||e.value})},e.id)})}),(0,a.jsx)("button",{ref:H,onClick:P,disabled:!w||s,className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10 w-20 h-20 rounded-full flex items-center justify-center text-white font-bold transition-all ".concat(w&&!s?"bg-[#FF6B00] hover:bg-[#FF8800] cursor-pointer":"bg-gray-600 cursor-not-allowed"),children:s?(0,a.jsx)(g,{className:"w-6 h-6 animate-spin"}):w?(0,a.jsx)("span",{children:"\xc7EVİR"}):(0,a.jsx)(j.Z,{className:"w-6 h-6"})})]}),M?(0,a.jsxs)("div",{className:"mt-4 bg-green-900/30 border border-green-800 rounded-lg p-4 text-center",children:[(0,a.jsxs)("h3",{className:"text-xl font-bold text-green-300 flex items-center justify-center mb-2",children:[(0,a.jsx)(k.Z,{className:"w-6 h-6 mr-2"}),"Tebrikler!"]}),(0,a.jsx)("p",{className:"text-white mb-1",children:"\xd6d\xfcl\xfcn\xfcz:"}),(0,a.jsxs)("div",{className:"flex items-center justify-center text-2xl font-bold text-yellow-400",children:[(0,a.jsx)(v.Z,{className:"w-6 h-6 mr-2"}),Z," JackCoin"]})]}):w||s?null:(0,a.jsxs)("div",{className:"mt-4 bg-gray-800 border border-gray-700 rounded-lg p-4 text-center",children:[(0,a.jsx)("h3",{className:"text-md font-semibold text-gray-300 mb-1",children:"Sonraki \xc7evirme:"}),(0,a.jsx)("div",{className:"text-xl font-bold text-white",children:C})]}),r&&r.user&&(0,a.jsxs)("div",{className:"mt-6 w-full",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Son Kazan\xe7larınız"}),(0,a.jsx)("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:d(r.user.id).spinHistory.length>0?(0,a.jsx)("div",{className:"divide-y divide-gray-700",children:d(r.user.id).spinHistory.slice(0,5).map(e=>(0,a.jsxs)("div",{className:"p-3 flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(v.Z,{className:"w-5 h-5 text-yellow-400 mr-2"}),(0,a.jsxs)("span",{className:"font-semibold",children:[e.reward," JackCoin"]})]}),(0,a.jsx)("div",{className:"text-sm text-gray-400",children:new Date(e.timestamp).toLocaleDateString()})]},e.id))}):(0,a.jsx)("p",{className:"p-4 text-center text-gray-400",children:"Hen\xfcz \xe7ark \xe7evirmediniz."})})]})]})},w=r(9108),S=r(8792);function C(){let e=(0,s.useRouter)(),t=(0,i.useAuth)(),[r,c]=(0,l.useState)(null);if(!t)throw Error("AuthContext is undefined");let{user:o,loading:d}=t;return d||o?(0,a.jsx)(n.Z,{children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)(S.default,{href:"/",className:"flex items-center text-blue-400 hover:text-blue-300 mb-2",children:[(0,a.jsx)(w.Z,{className:"w-5 h-5 mr-1"})," Ana Sayfaya D\xf6n"]}),(0,a.jsxs)("h1",{className:"text-3xl font-bold text-white flex items-center",children:[(0,a.jsx)(k.Z,{className:"w-8 h-8 text-[#FF6B00] mr-2"}),"G\xfcnl\xfck \xc7ark \xc7evir"]}),(0,a.jsx)("p",{className:"text-gray-400 mt-1",children:"Her g\xfcn \xe7arkı \xe7evir, JackCoin kazanma şansı yakala!"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"md:col-span-2 bg-gray-800 rounded-lg shadow-lg overflow-hidden",children:(0,a.jsx)(N,{onSpin:e=>{c(e)}})}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg shadow-lg p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"\xc7ark \xc7evir Bilgileri"}),o&&(0,a.jsxs)("div",{className:"mb-6 p-4 bg-gray-700 rounded-lg",children:[(0,a.jsx)("h3",{className:"text-sm text-gray-400 mb-1",children:"Mevcut JackCoin Bakiyeniz"}),(0,a.jsxs)("div",{className:"flex items-center text-yellow-400 font-bold text-xl",children:[(0,a.jsx)(v.Z,{className:"w-5 h-5 mr-2"}),o.jackPoints," JackCoin"]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-2 text-white",children:"Nasıl Oynanır?"}),(0,a.jsxs)("ul",{className:"list-disc list-inside text-gray-300 space-y-2 text-sm",children:[(0,a.jsx)("li",{children:"Her g\xfcn (24 saatte bir) \xe7arkı \xe7evirebilirsiniz"}),(0,a.jsx)("li",{children:"\xc7arkı \xe7evirmek i\xe7in butona tıklayın"}),(0,a.jsx)("li",{children:"Kazandığınız JackCoin otomatik olarak hesabınıza eklenir"}),(0,a.jsx)("li",{children:"JackCoin'lerinizi marketten indirim kodları almak i\xe7in kullanabilirsiniz"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-2 text-white",children:"Olası \xd6d\xfcller"}),(0,a.jsxs)("ul",{className:"list-disc list-inside text-gray-300 space-y-1 text-sm",children:[(0,a.jsx)("li",{children:"5 JackCoin"}),(0,a.jsx)("li",{children:"10 JackCoin"}),(0,a.jsx)("li",{children:"20 JackCoin"}),(0,a.jsx)("li",{children:"40 JackCoin"}),(0,a.jsx)("li",{children:"50 JackCoin"}),(0,a.jsx)("li",{children:"70 JackCoin"}),(0,a.jsx)("li",{children:"85 JackCoin"}),(0,a.jsx)("li",{children:"100 JackCoin"}),(0,a.jsx)("li",{children:"200 JackCoin (Nadir)"})]})]}),(0,a.jsxs)("div",{className:"bg-gray-700 p-4 rounded-lg",children:[(0,a.jsxs)("h3",{className:"font-semibold mb-2 text-white flex items-center",children:[(0,a.jsx)(k.Z,{className:"w-4 h-4 mr-1 text-[#FF6B00]"}),"JackCoin Nasıl Kullanılır?"]}),(0,a.jsx)("p",{className:"text-gray-300 text-sm",children:"Market b\xf6l\xfcm\xfcnde JackCoin'lerinizi \xe7eşitli indirim kodları ve \xf6zel \xf6d\xfcller i\xe7in kullanabilirsiniz."}),(0,a.jsx)(S.default,{href:"/market",className:"mt-3 inline-block px-4 py-2 bg-[#FF6B00] text-white rounded hover:bg-[#E05A00]",children:"Market'e Git"})]})]})]})]})]})}):(e.push("/"),null)}}},function(e){e.O(0,[8240,703,8792,3755,5947,5494,2971,8069,1744],function(){return e(e.s=6339)}),_N_E=e.O()}]);