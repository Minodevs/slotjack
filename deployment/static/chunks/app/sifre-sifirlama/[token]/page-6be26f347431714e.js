(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1328],{9253:function(e,r,t){Promise.resolve().then(t.bind(t,6517))},3879:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(7461).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},6578:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(7461).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},8994:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(7461).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},1652:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(7461).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},6517:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return h},dynamic:function(){return x}});var s=t(3827),a=t(4090),n=t(7907),i=t(8792),l=t(8009),o=t(5494),c=t(8994),d=t(8998),m=t(3879),u=t(6578),f=t(1652);let x="force-dynamic";function h(e){let{params:r}=e,t=(0,n.useRouter)(),{token:x}=r,[h,y]=(0,a.useState)(""),[g,p]=(0,a.useState)(""),[b,w]=(0,a.useState)(!1),[j,v]=(0,a.useState)(null),[N,k]=(0,a.useState)(!0),[Z,z]=(0,a.useState)(!1);(0,a.useEffect)(()=>{!async function(){try{let e;let r=await fetch("/api/auth/forgot-password-v2?token=".concat(x));try{e=await r.json()}catch(e){console.error("Error parsing token validation response:",e),v(!1),l.toast.error("Sunucu yanıtı işlenirken bir hata oluştu. L\xfctfen daha sonra tekrar deneyin."),k(!1);return}v(e.valid),e.valid||l.toast.error(e.error||"Ge\xe7ersiz veya s\xfcresi dolmuş token.")}catch(e){v(!1),l.toast.error("Token doğrulaması sırasında bir hata oluştu.")}finally{k(!1)}}()},[x]);let S=async e=>{if(e.preventDefault(),h!==g){l.toast.error("Şifreler eşleşmiyor.");return}if(h.length<8){l.toast.error("Şifre en az 8 karakter uzunluğunda olmalıdır.");return}w(!0);try{let e;let r=await fetch("/api/auth/reset-password-v2",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:x,newPassword:h})});try{e=await r.json()}catch(e){throw console.error("Error parsing reset password response:",e),Error("Sunucu yanıtı işlenirken bir hata oluştu. L\xfctfen daha sonra tekrar deneyin.")}if(!r.ok)throw Error(e.error||"Şifre sıfırlama sırasında bir hata oluştu.");z(!0),l.toast.success("Şifreniz başarıyla sıfırlandı."),setTimeout(()=>{t.push("/giris")},3e3)}catch(e){l.toast.error(e.message)}finally{w(!1)}};return N?(0,s.jsx)(o.Z,{children:(0,s.jsx)("div",{className:"flex items-center justify-center min-h-[calc(100vh-4rem)] px-4 py-12 bg-gray-900",children:(0,s.jsxs)("div",{className:"w-full max-w-md p-8 space-y-6 bg-gray-800 rounded-xl shadow-lg border border-gray-700 text-center",children:[(0,s.jsx)(c.Z,{className:"h-8 w-8 animate-spin mx-auto text-orange-500"}),(0,s.jsx)("p",{className:"text-white",children:"Token doğrulanıyor..."})]})})}):!1===j?(0,s.jsx)(o.Z,{children:(0,s.jsx)("div",{className:"flex items-center justify-center min-h-[calc(100vh-4rem)] px-4 py-12 bg-gray-900",children:(0,s.jsxs)("div",{className:"w-full max-w-md p-8 space-y-6 bg-gray-800 rounded-xl shadow-lg border border-gray-700",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(d.Z,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-white mb-2",children:"Ge\xe7ersiz veya S\xfcresi Dolmuş Link"}),(0,s.jsx)("p",{className:"text-gray-300",children:"Bu şifre sıfırlama bağlantısı ge\xe7ersiz veya s\xfcresi dolmuş. L\xfctfen yeni bir şifre sıfırlama isteği oluşturun."})]}),(0,s.jsxs)("div",{className:"mt-6 text-center",children:[(0,s.jsx)(i.default,{href:"/sifremi-unuttum",className:"inline-flex items-center justify-center w-full py-3 px-4 bg-orange-600 text-white rounded-md hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 text-sm font-medium",children:"Yeni Şifre Sıfırlama İsteği Oluştur"}),(0,s.jsxs)(i.default,{href:"/giris",className:"inline-flex items-center text-orange-500 hover:text-orange-400 mt-4",children:[(0,s.jsx)(m.Z,{size:16,className:"mr-2"}),"Giriş sayfasına d\xf6n"]})]})]})})}):Z?(0,s.jsx)(o.Z,{children:(0,s.jsx)("div",{className:"flex items-center justify-center min-h-[calc(100vh-4rem)] px-4 py-12 bg-gray-900",children:(0,s.jsxs)("div",{className:"w-full max-w-md p-8 space-y-6 bg-gray-800 rounded-xl shadow-lg border border-gray-700",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(u.Z,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-white mb-2",children:"Şifre Başarıyla Sıfırlandı"}),(0,s.jsx)("p",{className:"text-gray-300",children:"Şifreniz başarıyla sıfırlandı. Yeni şifrenizle giriş yapabilirsiniz."}),(0,s.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:"Giriş sayfasına y\xf6nlendiriliyorsunuz..."})]}),(0,s.jsx)("div",{className:"mt-6 text-center",children:(0,s.jsx)(i.default,{href:"/giris",className:"inline-flex items-center justify-center w-full py-3 px-4 bg-orange-600 text-white rounded-md hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 text-sm font-medium",children:"Giriş Yap"})})]})})}):(0,s.jsx)(o.Z,{children:(0,s.jsx)("div",{className:"flex items-center justify-center min-h-[calc(100vh-4rem)] px-4 py-12 bg-gray-900",children:(0,s.jsxs)("div",{className:"w-full max-w-md p-8 space-y-6 bg-gray-800 rounded-xl shadow-lg border border-gray-700",children:[(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Şifre Sıfırlama"}),(0,s.jsx)("p",{className:"text-gray-300 mt-1",children:"L\xfctfen yeni şifrenizi belirleyin"})]}),(0,s.jsxs)("form",{onSubmit:S,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-1",children:"Yeni Şifre"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,s.jsx)(f.Z,{className:"h-5 w-5 text-gray-400"})}),(0,s.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,value:h,onChange:e=>y(e.target.value),disabled:b,className:"pl-10 mt-1 block w-full px-3 py-3 bg-gray-700 border border-gray-600 rounded-md text-white shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500 text-sm",placeholder:"Yeni şifreniz (en az 8 karakter)",minLength:8})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-300 mb-1",children:"Şifreyi Onayla"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,s.jsx)(f.Z,{className:"h-5 w-5 text-gray-400"})}),(0,s.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,value:g,onChange:e=>p(e.target.value),disabled:b,className:"pl-10 mt-1 block w-full px-3 py-3 bg-gray-700 border border-gray-600 rounded-md text-white shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500 text-sm",placeholder:"Şifrenizi tekrar girin",minLength:8})]}),h!==g&&""!==g&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-400",children:"Şifreler eşleşmiyor."})]}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{type:"submit",disabled:b,className:"w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed",children:b?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.Z,{className:"animate-spin mr-2 h-4 w-4"}),"İşleniyor..."]}):"Şifreyi Sıfırla"})}),(0,s.jsx)("div",{className:"text-center mt-4",children:(0,s.jsxs)(i.default,{href:"/giris",className:"text-sm text-orange-500 hover:text-orange-400",children:[(0,s.jsx)(m.Z,{className:"inline mr-1 h-4 w-4"}),"Giriş sayfasına d\xf6n"]})})]})]})})})}}},function(e){e.O(0,[8240,703,8792,3755,8009,5947,5494,2971,8069,1744],function(){return e(e.s=9253)}),_N_E=e.O()}]);