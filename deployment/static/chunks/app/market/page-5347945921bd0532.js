(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3828],{5633:function(e,a,t){Promise.resolve().then(t.bind(t,6))},1524:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(7461).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},7759:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(7461).Z)("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]])},6:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return m}});var s=t(3827),l=t(4090),r=t(7907),i=t(5947),n=t(1524),c=t(7759),d=t(8009),o=t(5494);function m(){(0,r.useRouter)();let e=(0,i.useAuth)(),[a,t]=(0,l.useState)(!0),[m,x]=(0,l.useState)([]),[h,u]=(0,l.useState)(null),{user:b}=e||{},p=(null==b?void 0:b.jackPoints)||0;if((0,l.useEffect)(()=>{(async()=>{try{t(!0),u(null);let e=await fetch("/api/market/items?t=".concat(Date.now()),{cache:"no-store",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}});if(!e.ok)throw Error("API error: ".concat(e.status));let a=await e.json();if(a.success&&a.items&&Array.isArray(a.items))console.log("Loaded market items:",a.items.length),x(a.items);else throw Error("Invalid response format")}catch(e){console.error("Error loading market items:",e),u("\xdcr\xfcnler y\xfcklenirken bir hata oluştu. L\xfctfen daha sonra tekrar deneyin.");try{let e=localStorage.getItem("market_items");if(e){let a=JSON.parse(e);Array.isArray(a)&&a.length>0&&(x(a),d.toast.success("Veriler \xe7evrimdışı modda y\xfcklendi"))}}catch(e){console.error("Error loading from localStorage:",e)}}finally{t(!1)}})()},[]),a)return(0,s.jsx)(o.Z,{children:(0,s.jsx)("div",{className:"w-full flex items-center justify-center min-h-[500px] bg-gray-900",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"inline-block w-8 h-8 border-4 border-[#FF6B00] border-t-transparent rounded-full animate-spin mb-3"}),(0,s.jsx)("p",{className:"text-base text-gray-300",children:"Y\xfckleniyor..."})]})})});let f=a=>{if(!b){d.toast.error("Satın alma işlemi i\xe7in giriş yapmalısınız");return}if(p<a.points){d.toast.error("Yeterli JackPoint'iniz bulunmamaktadır");return}(null==e?void 0:e.updateJackPoints)&&(e.updateJackPoints(-a.points,"".concat(a.name," satın alındı"),"spend"),d.toast.success("Satın alma işlemi başarılı! Telegram \xfczerinden bizimle iletişime ge\xe7in: @slotjack"))};return(0,s.jsx)(o.Z,{children:(0,s.jsx)("div",{className:"bg-gray-900 min-h-screen pb-10",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 pt-8",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-white mb-4",children:"Puan Marketi"}),(0,s.jsx)("p",{className:"text-gray-400 mb-8",children:"Kazandığınız puanlar ile markette bulunan kartlardan taleplerinizi ger\xe7ekleştirin!"}),(0,s.jsx)("div",{className:"bg-amber-900/30 border border-amber-700 rounded-lg p-4 mb-8",children:(0,s.jsxs)("div",{className:"flex items-start",children:[(0,s.jsx)("div",{className:"bg-amber-500 rounded-full p-1 mr-2 mt-0.5 flex-shrink-0",children:(0,s.jsx)(n.Z,{className:"text-black w-4 h-4"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-amber-500 font-semibold text-sm mb-1",children:"\xdcyeler Ayda 1 Kere Nakit \xd6d\xfcl Alabilir."}),(0,s.jsx)("p",{className:"text-amber-200 text-xs",children:"Multi hesapla kasım sağlayanların puanları iptal edilmeyecek ve etkinliklerden men edilecektir."})]})]})}),(0,s.jsx)("div",{className:"hidden md:grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:m.map(e=>(0,s.jsxs)("div",{className:"rounded-lg overflow-hidden bg-gray-800/50 border border-gray-700 flex flex-col",children:[(0,s.jsx)("div",{className:"relative w-full h-40 bg-blue-900",children:(0,s.jsx)("img",{src:e.imageUrl,alt:e.name,className:"w-full h-full object-contain"})}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("h3",{className:"text-white text-lg font-bold mb-1",children:e.name}),(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsx)("div",{className:"text-gray-400 text-sm mb-4 line-clamp-2",children:e.description}),(0,s.jsxs)("div",{className:"bg-gray-700 p-3 rounded-lg flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(c.Z,{className:"w-5 h-5 text-yellow-500"}),(0,s.jsx)("span",{className:"text-white font-bold",children:e.points})]}),(0,s.jsx)("button",{className:"bg-[#FF6B00] hover:bg-[#E05A00] text-white px-4 py-2 rounded-md text-sm font-medium",onClick:()=>f(e),children:"Satın Al"})]})]})]})]},"desktop-".concat(e.id)))}),(0,s.jsx)("div",{className:"flex flex-col md:hidden space-y-5",children:m.map(e=>(0,s.jsxs)("div",{className:"rounded-lg overflow-hidden bg-gray-800/50 border border-gray-700 flex flex-col",children:[(0,s.jsx)("div",{className:"relative w-full",style:{backgroundColor:"#192350"},children:(0,s.jsx)("img",{src:e.imageUrl,alt:e.name,className:"w-full object-contain py-6",style:{maxHeight:"180px"}})}),(0,s.jsxs)("div",{className:"p-5",children:[(0,s.jsx)("h3",{className:"text-white text-xl font-bold mb-2",children:e.name}),(0,s.jsx)("div",{className:"text-gray-400 text-sm mb-4",children:e.description}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,s.jsx)("div",{className:"bg-gray-700/70 py-2 px-4 rounded-full flex items-center",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(c.Z,{className:"w-5 h-5 text-yellow-500"}),(0,s.jsx)("span",{className:"text-white font-bold",children:e.points})]})}),(0,s.jsx)("button",{className:"bg-[#FF6B00] hover:bg-[#E05A00] text-white px-6 py-3 rounded-full text-sm font-medium",onClick:()=>f(e),children:"Satın Al"})]})]})]},"mobile-".concat(e.id)))}),(h||0===m.length)&&(0,s.jsx)("div",{className:"bg-gray-800 rounded-lg p-8 text-center mt-8",children:(0,s.jsx)("p",{className:"text-gray-400",children:h||"Hen\xfcz market \xfcr\xfcn\xfc bulunmamaktadır."})})]})})})}}},function(e){e.O(0,[8240,703,8792,3755,8009,5947,5494,2971,8069,1744],function(){return e(e.s=5633)}),_N_E=e.O()}]);