"use strict";(()=>{var e={};e.id=9356,e.ids=[9356],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},82361:e=>{e.exports=require("events")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},41808:e=>{e.exports=require("net")},85477:e=>{e.exports=require("punycode")},12781:e=>{e.exports=require("stream")},24404:e=>{e.exports=require("tls")},57310:e=>{e.exports=require("url")},59796:e=>{e.exports=require("zlib")},23340:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>g,originalPathname:()=>v,patchFetch:()=>x,requestAsyncStorage:()=>h,routeModule:()=>d,serverHooks:()=>m,staticGenerationAsyncStorage:()=>f,staticGenerationBailout:()=>b});var s={};t.r(s),t.d(s,{GET:()=>p,POST:()=>c});var a=t(95419),o=t(69108),i=t(99678),n=t(78070),l=t(42509),u=t(88439);async function c(e){try{let{token:r,newPassword:t}=await e.json();if(!r||!t)return n.Z.json({error:"Token ve şifre gereklidir"},{status:400});let s=(0,u.LP)(r);if(!s)return n.Z.json({error:"Ge\xe7ersiz veya s\xfcresi dolmuş token"},{status:400});if((0,u.pw)(s))return(0,u.pQ)(r),n.Z.json({error:"Token s\xfcresi dolmuş, l\xfctfen yeni bir şifre sıfırlama talebinde bulunun"},{status:400});let a=await (0,l.e)(),{email:o}=s,{error:i}=await a.from("profiles").update({password_hash:t}).eq("email",o);if(i)return console.error("Şifre g\xfcncelleme hatası:",i),n.Z.json({error:"Şifre sıfırlama sırasında bir hata oluştu"},{status:500});return(0,u.pQ)(r),n.Z.json({message:"Şifreniz başarıyla sıfırlandı"},{status:200})}catch(e){return console.error("Şifre sıfırlama hatası:",e),n.Z.json({error:"Şifre sıfırlama işlemi sırasında bir hata oluştu"},{status:500})}}async function p(e){let r=new URL(e.url).searchParams.get("token");if(!r)return n.Z.json({error:"Token parametresi gereklidir"},{status:400});let t=(0,u.LP)(r);return t?(0,u.pw)(t)?((0,u.pQ)(r),n.Z.json({valid:!1,error:"Token s\xfcresi dolmuş"},{status:200})):n.Z.json({valid:!0,email:t.email},{status:200}):n.Z.json({valid:!1,error:"Ge\xe7ersiz token"},{status:200})}let d=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/auth/reset-password-v2/route",pathname:"/api/auth/reset-password-v2",filename:"route",bundlePath:"app/api/auth/reset-password-v2/route"},resolvedPagePath:"E:\\copycoder-2025-04-13T00-58-05-829Z\\src\\app\\api\\auth\\reset-password-v2\\route.ts",nextConfigOutput:"standalone",userland:s}),{requestAsyncStorage:h,staticGenerationAsyncStorage:f,serverHooks:m,headerHooks:g,staticGenerationBailout:b}=d,v="/api/auth/reset-password-v2/route";function x(){return(0,i.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:f})}},42509:(e,r,t)=>{let s;t.d(r,{e:()=>n});var a=t(24459),o=t(7439);try{s=global.fetch}catch(e){console.warn("Native fetch not available, using polyfill would be needed")}let i=e=>new Promise(r=>setTimeout(r,e)),n=async(e=3)=>{try{console.log("Creating server-side Supabase client...");let r=(0,o.cookies)(),t="https://your-project-id.supabase.co".trim(),n="your-supabase-anon-key".trim();if(!t||!n)throw console.error("Missing Supabase environment variables:",t?"":"NEXT_PUBLIC_SUPABASE_URL",n?"":"NEXT_PUBLIC_SUPABASE_ANON_KEY"),Error("Missing required Supabase configuration");let l=null;for(let o=1;o<=e;o++)try{console.log(`Attempt ${o} of ${e} to create Supabase client`);let i=(0,a.lx)(t,n,{cookies:{get:e=>r.get(e)?.value},auth:{persistSession:!1,autoRefreshToken:!1},global:{fetch:s,headers:{"X-Client-Info":"next-server-supabase"}},db:{schema:"public"},realtime:{timeout:1e4}});try{let e=await i.from("health_check").select("*").limit(1).maybeSingle();if(e.error)throw console.warn(`Health check failed on attempt ${o}:`,e.error),e.error;console.log("Supabase server client created and verified successfully")}catch(e){if(e.message&&e.message.includes('relation "health_check" does not exist'))console.log("Health check table does not exist, but connection seems good");else throw e}return i}catch(r){if(l=r,console.error(`Failed to initialize Supabase client (attempt ${o}/${e}):`,r),o<e){let e=Math.min(500*Math.pow(2,o-1),5e3);console.log(`Retrying in ${e}ms...`),await i(e)}}throw Error(`Supabase client initialization failed after ${e} attempts: ${l instanceof Error?l.message:String(l)}`)}catch(e){throw console.error("Error creating Supabase server client:",e),e}}},88439:(e,r,t)=>{t.d(r,{LP:()=>a,mB:()=>o,pQ:()=>i,pw:()=>n});let s={};function a(e){return s[e]}function o(e,r){s[e]=r}function i(e){delete s[e]}function n(e){return new Date().getTime()-e.createdAt.getTime()>36e5}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[1638,6206,7439,4459],()=>t(23340));module.exports=s})();