"use strict";(()=>{var e={};e.id=3219,e.ids=[3219],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},82361:e=>{e.exports=require("events")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},41808:e=>{e.exports=require("net")},85477:e=>{e.exports=require("punycode")},12781:e=>{e.exports=require("stream")},24404:e=>{e.exports=require("tls")},57310:e=>{e.exports=require("url")},59796:e=>{e.exports=require("zlib")},90764:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>b,originalPathname:()=>v,patchFetch:()=>x,requestAsyncStorage:()=>h,routeModule:()=>m,serverHooks:()=>w,staticGenerationAsyncStorage:()=>g,staticGenerationBailout:()=>y});var a={};r.r(a),r.d(a,{GET:()=>f,POST:()=>d});var o=r(95419),s=r(69108),n=r(99678),i=r(42509),l=r(35300),u=r(78070);async function c(e,t){console.log(`
    [DEV ONLY] Password reset email sent to ${e}
    Reset link: ${t}
    
    In production, this would send an actual email with:
    - Company branding
    - Password reset instructions
    - Security information
    - Contact support details
  `)}var p=r(88439);async function d(e){try{let{email:t}=await e.json();if(!t)return u.Z.json({error:"E-posta adresi gereklidir"},{status:400});let r=await (0,i.e)(),{data:a,error:o}=await r.from("profiles").select("id, email").eq("email",t).single();if(o||!a)return u.Z.json({message:"Şifre sıfırlama talimatları belirtilen e-posta adresine g\xf6nderildi"},{status:200});let s=(0,l.Z)(),n=`http://localhost:3000/reset-password?token=${s}`,d=new Date,f=new Date(d.getTime()+36e5);(0,p.mB)(s,{email:t,token:s,expires:f,createdAt:d});try{await c(t,n)}catch(e){return console.error("Email sending failed:",e),u.Z.json({error:"Şifre sıfırlama e-postası g\xf6nderilirken bir hata oluştu"},{status:500})}return u.Z.json({message:"Şifre sıfırlama talimatları belirtilen e-posta adresine g\xf6nderildi"},{status:200})}catch(e){return console.error("Şifre sıfırlama hatası:",e),u.Z.json({error:"Şifre sıfırlama talebiniz işlenirken bir hata oluştu"},{status:500})}}async function f(e){let t=new URL(e.url).searchParams.get("token");if(!t)return u.Z.json({valid:!1},{status:400});let r=(0,p.LP)(t);return!r||(0,p.pw)(r)?(r&&(0,p.pQ)(t),u.Z.json({valid:!1},{status:404})):u.Z.json({valid:!0,email:r.email})}let m=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/auth/forgot-password-v2/route",pathname:"/api/auth/forgot-password-v2",filename:"route",bundlePath:"app/api/auth/forgot-password-v2/route"},resolvedPagePath:"E:\\copycoder-2025-04-13T00-58-05-829Z\\src\\app\\api\\auth\\forgot-password-v2\\route.ts",nextConfigOutput:"standalone",userland:a}),{requestAsyncStorage:h,staticGenerationAsyncStorage:g,serverHooks:w,headerHooks:b,staticGenerationBailout:y}=m,v="/api/auth/forgot-password-v2/route";function x(){return(0,n.patchFetch)({serverHooks:w,staticGenerationAsyncStorage:g})}},42509:(e,t,r)=>{let a;r.d(t,{e:()=>i});var o=r(24459),s=r(7439);try{a=global.fetch}catch(e){console.warn("Native fetch not available, using polyfill would be needed")}let n=e=>new Promise(t=>setTimeout(t,e)),i=async(e=3)=>{try{console.log("Creating server-side Supabase client...");let t=(0,s.cookies)(),r="https://your-project-id.supabase.co".trim(),i="your-supabase-anon-key".trim();if(!r||!i)throw console.error("Missing Supabase environment variables:",r?"":"NEXT_PUBLIC_SUPABASE_URL",i?"":"NEXT_PUBLIC_SUPABASE_ANON_KEY"),Error("Missing required Supabase configuration");let l=null;for(let s=1;s<=e;s++)try{console.log(`Attempt ${s} of ${e} to create Supabase client`);let n=(0,o.lx)(r,i,{cookies:{get:e=>t.get(e)?.value},auth:{persistSession:!1,autoRefreshToken:!1},global:{fetch:a,headers:{"X-Client-Info":"next-server-supabase"}},db:{schema:"public"},realtime:{timeout:1e4}});try{let e=await n.from("health_check").select("*").limit(1).maybeSingle();if(e.error)throw console.warn(`Health check failed on attempt ${s}:`,e.error),e.error;console.log("Supabase server client created and verified successfully")}catch(e){if(e.message&&e.message.includes('relation "health_check" does not exist'))console.log("Health check table does not exist, but connection seems good");else throw e}return n}catch(t){if(l=t,console.error(`Failed to initialize Supabase client (attempt ${s}/${e}):`,t),s<e){let e=Math.min(500*Math.pow(2,s-1),5e3);console.log(`Retrying in ${e}ms...`),await n(e)}}throw Error(`Supabase client initialization failed after ${e} attempts: ${l instanceof Error?l.message:String(l)}`)}catch(e){throw console.error("Error creating Supabase server client:",e),e}}},88439:(e,t,r)=>{r.d(t,{LP:()=>o,mB:()=>s,pQ:()=>n,pw:()=>i});let a={};function o(e){return a[e]}function s(e,t){a[e]=t}function n(e){delete a[e]}function i(e){return new Date().getTime()-e.createdAt.getTime()>36e5}},35300:(e,t,r)=>{r.d(t,{Z:()=>l});var a=r(6113);let o={randomUUID:a.randomUUID},s=new Uint8Array(256),n=s.length,i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));let l=function(e,t,r){if(o.randomUUID&&!t&&!e)return o.randomUUID();let l=(e=e||{}).random??e.rng?.()??(n>s.length-16&&((0,a.randomFillSync)(s),n=0),s.slice(n,n+=16));if(l.length<16)throw Error("Random bytes length must be >= 16");if(l[6]=15&l[6]|64,l[8]=63&l[8]|128,t){if((r=r||0)<0||r+16>t.length)throw RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[r+e]=l[e];return t}return function(e,t=0){return(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase()}(l)}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[1638,6206,7439,4459],()=>r(90764));module.exports=a})();