"use strict";(()=>{var e={};e.id=5998,e.ids=[5998],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},73292:e=>{e.exports=require("fs/promises")},71017:e=>{e.exports=require("path")},55911:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>w,originalPathname:()=>v,patchFetch:()=>x,requestAsyncStorage:()=>m,routeModule:()=>f,serverHooks:()=>g,staticGenerationAsyncStorage:()=>h,staticGenerationBailout:()=>y});var a={};t.r(a),t.d(a,{POST:()=>c});var o=t(95419),n=t(69108),i=t(99678),s=t(78070),u=t(73292),l=t(71017),p=t.n(l);async function d(e){try{if(137===e[0]&&80===e[1]&&78===e[2]&&71===e[3]){let r=e.readUInt32BE(16),t=e.readUInt32BE(20);return{width:r,height:t}}if(255===e[0]&&216===e[1]){let r=2;for(;r<e.length&&255===e[r];){let t=e[r+1],a=e.readUInt16BE(r+2);if(t>=192&&t<=207&&196!==t&&200!==t){let t=e.readUInt16BE(r+5);return{width:e.readUInt16BE(r+7),height:t}}r+=2+a}}return null}catch(e){return console.error("Error extracting image dimensions:",e),null}}async function c(e){try{let r=(await e.formData()).get("file");if(!r)return s.Z.json({error:"No file uploaded"},{status:400});if(!r.type.startsWith("image/"))return s.Z.json({error:"File must be an image"},{status:400});let t=Date.now(),a=r.name.replace(/\s+/g,"-").toLowerCase(),o=`${t}-${a}`,n=p().join(process.cwd(),"public","uploads","banners");try{await (0,u.mkdir)(n,{recursive:!0})}catch(e){console.error("Failed to create directory",e)}let i=Buffer.from(await r.arrayBuffer()),l=await d(i),c=p().join(n,o);await (0,u.writeFile)(c,i);let f=`/uploads/banners/${o}`;return s.Z.json({fileUrl:f,dimensions:l})}catch(e){return console.error("Error processing upload:",e),s.Z.json({error:"Failed to upload file"},{status:500})}}let f=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/upload/route",pathname:"/api/upload",filename:"route",bundlePath:"app/api/upload/route"},resolvedPagePath:"E:\\copycoder-2025-04-13T00-58-05-829Z\\src\\app\\api\\upload\\route.ts",nextConfigOutput:"standalone",userland:a}),{requestAsyncStorage:m,staticGenerationAsyncStorage:h,serverHooks:g,headerHooks:w,staticGenerationBailout:y}=f,v="/api/upload/route";function x(){return(0,i.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:h})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[1638,6206],()=>t(55911));module.exports=a})();